<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polarity & Maturity Model</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #graph { width: 100%; height: 600px; border: 1px solid #ccc; }
        #loading { text-align: center; margin: 20px; }
        form { margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Polarity & Maturity Model</h1>
    <h5>Create Polarity Graph</h5>
    <p>3 3 0.5</p> <!-- Placeholder params from your site -->
    <hr>

    <form id="promptForm">
        <label for="prompt">Enter your prompt (e.g., "Map Victim-Rescuer dynamic in an org team, Adapted Child maturity, no consent"):</label><br>
        <textarea id="prompt" name="prompt" rows="4" cols="50" required></textarea><br>
        <button type="submit">Submit</button>
    </form>

    <div id="loading">Loading...</div>
    <div id="graph" style="display: none;"></div>

    <script>
        // Basic form submit handler (POST to /generate_graph or your endpoint)
        document.getElementById('promptForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const prompt = document.getElementById('prompt').value;
            fetch('/generate_graph', {  // Adjust endpoint if needed
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: prompt })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('graph').style.display = 'block';
                renderGraph(data.nodes, data.edges);  // Assumes backend returns nodes/edges
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('loading').innerHTML = 'Error loading graph.';
            });
        });

        // Vis.js graph renderer (placeholderâ€”expand with your logic)
        function renderGraph(nodesData, edgesData) {
            const container = document.getElementById('graph');
            const data = {
                nodes: new vis.DataSet(nodesData),  // e.g., [{id:1, label:'Victim', size:10}]
                edges: new vis.DataSet(edgesData)   // e.g., [{from:1, to:2, color:'red'}]
            };
            const options = { physics: { enabled: true } };  // Add repulsion, etc.
            new vis.Network(container, data, options);
        }
    </script>
</body>
</html>